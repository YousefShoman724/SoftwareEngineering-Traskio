<!DOCTYPE html>
<html>
<head>
    <title>Traskio</title>
</head>
<body>
    <h1>Task Manager</h1>
    <form id="taskForm">
        <input type="text" id="title" placeholder="Title" required>
        <input type="text" id="description" placeholder="Description">
        <button type="submit">Add Task</button>
    </form>

    <ul id="tasksList"></ul>

    <script>
        const apiUrl = "http://127.0.0.1:5000/tasks";

        document.getElementById("taskForm").addEventListener("submit", function(event) {
            event.preventDefault();
            const title = document.getElementById("title").value;
            const description = document.getElementById("description").value;

            fetch(apiUrl, {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({title, description})
            })
            .then(res => res.json())
            .then(task => {
                loadTasks();
            });
        });

        function loadTasks() {
            fetch(apiUrl)
            .then(res => res.json())
            .then(tasks => {
                const list = document.getElementById("tasksList");
                list.innerHTML = "";
                tasks.forEach(t => {
                    const li = document.createElement("li");
                    li.textContent = `${t.id}: ${t.title} - ${t.description}`;
                    list.appendChild(li);
                });
            });
        }
        loadTasks();
    </script>
</body>
</html>
